---
import { cn } from "@/lib/utils"
import type { SubNavItem, SubNavItemWithSubItems } from "./SubNav.astro"
import Link from "./ui/Link.astro"

interface Props {
  item: SubNavItemWithSubItems
}

const { item } = Astro.props
const currentPath = Astro.url.pathname

if (!item) return null
---
{
  item.type === "heading" && (
    <h4 class="font-heading pb-2 scroll-m-20 text-sm font-semibold tracking-tight mt-0 pl-1.5">{item.text}</h4>
  )
}
{
  item.type === "item" && (
    <Link href={item.href} class={cn("hover:text-link-hover underline-offset-4 underline decoration-transparent decoration-dotted transition-colors duration-300 ease-out hover:decoration-link-hover inline-flex pl-1.5 py-1 rounded-sm",
      currentPath.includes(item.href)
              ? "text-foreground bg-accent"
              : "text-foreground/60",
    )}>{item.text}</Link>
  )
}
{
  item.subItems.length > 0 && (
    <div class="grid gap-1 text-sm mb-5">
      {item.subItems.map((subitem: any) => (
        <Astro.self item={subitem} />
      ))}
    </div>
  )
}
